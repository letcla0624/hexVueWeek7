"use strict";(self["webpackChunkhexVueWeek7"]=self["webpackChunkhexVueWeek7"]||[]).push([[115],{4476:function(e,t,o){o.d(t,{Z:function(){return C},_:function(){return k}});var l=o(3396),a=o(7139);const s={class:"modal fade",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true",ref:"delModal"},d={class:"modal-dialog modal-dialog-centered"},r={class:"modal-content"},i={class:"modal-header"},n={class:"modal-title",id:"delModalLabel"},c=(0,l._)("i",{class:"bi bi-exclamation-triangle-fill text-danger me-2"},null,-1),m=(0,l.Uk)("熊孩子，您確定要刪除"),p={class:"text-danger mx-1"},b=(0,l.Uk)("嗎？ "),u=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),g=(0,l._)("div",{class:"modal-body"},"刪除之後資料不可逆，不可反悔喔！",-1),_={class:"modal-footer"},h=(0,l._)("button",{type:"button",class:"btn btn-link text-decoration-none text-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),w=(0,l._)("i",{class:"bi bi-trash-fill me-1"},null,-1),v=(0,l.Uk)("確定刪除 "),P=[w,v];function f(e,t,o,w,v,f){return(0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("div",d,[(0,l._)("div",r,[(0,l._)("div",i,[(0,l._)("h5",n,[c,m,(0,l._)("span",p,(0,a.zw)(o.delItem.title),1),b]),u]),g,(0,l._)("div",_,[h,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=e=>f.delProdBtn(o.delItem.id))},P)])])])],512)}let k=null;var y={props:["delItem","pageName"],methods:{delProdBtn(e){let t="";"prodsList"===this.pageName?t=`https://vue3-course-api.hexschool.io/v2/api/letcla/admin/product/${e}`:"orders"===this.pageName?t=`https://vue3-course-api.hexschool.io/v2/api/letcla/admin/order/${e}`:"coupons"===this.pageName&&(t=`https://vue3-course-api.hexschool.io/v2/api/letcla/admin/coupon/${e}`),this.$http.delete(t).then((e=>{this.$emit("get-item"),k.hide(),setTimeout((()=>{alert(e.data.message)}),1e3)})).catch((e=>{console.dir(e.response),k.hide(),alert(e.response.data.message)}))}},mounted(){k=new bootstrap.Modal(this.$refs.delModal,{backdrop:"static",keyboard:!1})}},U=o(89);const x=(0,U.Z)(y,[["render",f]]);var C=x},9115:function(e,t,o){o.r(t),o.d(t,{default:function(){return Dt}});var l=o(3396),a=o(7139);const s={class:"container"},d={class:"d-sm-flex justify-content-between align-items-center py-3"},r={class:"h2"},i=(0,l.Uk)(" 後台產品列表"),n={class:"fs-5"},c={class:"d-flex align-items-center justify-content-between"},m=(0,l._)("i",{class:"bi bi-pencil-square me-1"},null,-1),p=(0,l.Uk)(" 新增商品 "),b=[m,p],u={class:"table-responsive"},g={class:"table table-dark table-hover"},_=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"分類"),(0,l._)("th",null,"名稱"),(0,l._)("th",null,"原價"),(0,l._)("th",null,"售價"),(0,l._)("th",null,"是否啟用"),(0,l._)("th",null,"編輯／刪除")])],-1),h=["onClick"],w={key:0,class:"mb-0 text-warning"},v={key:1,class:"mb-0 text-secondary"},P={class:"btn-group",role:"group"},f=["onClick"],k=(0,l._)("i",{class:"bi bi-pencil-fill"},null,-1),y=[k],U=["onClick"],x=(0,l._)("i",{class:"bi bi-trash-fill"},null,-1),C=[x];function N(e,t,o,m,p,k){const x=(0,l.up)("AdminProdViewComponent"),N=(0,l.up)("CreateProdComponent"),D=(0,l.up)("DeleteComponent");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l._)("div",d,[(0,l._)("h1",r,[i,(0,l._)("span",n,"【目前有 "+(0,a.zw)(Object.keys(p.adminProds).length)+" 項產品】",1)]),(0,l._)("div",c,[(0,l._)("button",{type:"button",class:"btn btn-dark ms-3",onClick:t[0]||(t[0]=e=>k.openModal("new"))},b)])]),(0,l._)("div",u,[(0,l._)("table",g,[_,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(p.adminProds,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,(0,a.zw)(e.category),1),(0,l._)("td",{class:"text-decoration-underline cursor-pointer",onClick:t=>k.openModal("detail",e)},(0,a.zw)(e.title),9,h),(0,l._)("td",null,"$NTD "+(0,a.zw)(e.origin_price),1),(0,l._)("td",null,"$NTD "+(0,a.zw)(e.price),1),(0,l._)("td",null,[e.is_enabled?((0,l.wg)(),(0,l.iD)("p",w,"啟用")):((0,l.wg)(),(0,l.iD)("p",v,"未啟用"))]),(0,l._)("td",null,[(0,l._)("div",P,[(0,l._)("button",{type:"button",class:"btn btn-outline-warning btn-sm",onClick:t=>k.openModal("edit",e)},y,8,f),(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>k.openModal("delete",e)},C,8,U)])])])))),128))])])])]),(0,l.Wm)(x,{"show-prod":p.createProdTemp},null,8,["show-prod"]),(0,l.Wm)(N,{"admin-prod":p.createProdTemp,"is-new":p.isNew,onGetAdminprods:k.getAdminProds},null,8,["admin-prod","is-new","onGetAdminprods"]),(0,l.Wm)(D,{"del-item":p.createProdTemp,"page-name":p.pageName,onGetItem:k.getAdminProds},null,8,["del-item","page-name","onGetItem"])],64)}var D=o(9242);const M={class:"modal fade",tabindex:"-1","aria-labelledby":"prodModalLabel","aria-hidden":"true",ref:"prodModal"},$={class:"modal-dialog modal-xl modal-dialog-centered"},z={class:"modal-content"},T={class:"modal-header"},V={class:"modal-title",id:"prodModalLabel"},A=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),L={class:"modal-body"},I=(0,l._)("p",{class:"text-secondary"},[(0,l._)("span",{class:"text-danger me-1"},"*"),(0,l.Uk)("為必填欄位 ")],-1),H={class:"row"},Y={class:"col-lg-7"},Z=(0,l._)("h5",{class:"h5"},"商品內容",-1),B={class:"form-floating mb-3"},W=(0,l._)("label",{for:"title"},[(0,l._)("span",{class:"text-danger me-1"},"*"),(0,l.Uk)("商品名稱(title) ")],-1),j={class:"row g-3"},G={class:"col-sm"},K={class:"form-floating mb-3"},O=(0,l._)("option",{disabled:""},"請選擇",-1),q=["value"],J=(0,l._)("label",{for:"categories"},[(0,l._)("span",{class:"text-danger me-1"},"*"),(0,l.Uk)("分類(category)")],-1),S={class:"col-sm"},F={class:"form-floating mb-3"},E=(0,l._)("label",{for:"unit"},[(0,l._)("span",{class:"text-danger me-1"},"*"),(0,l.Uk)("單位(unit)")],-1),Q={class:"row g-3"},R={class:"col-sm"},X={class:"form-floating mb-3"},ee=(0,l._)("label",{for:"origin_price"},[(0,l._)("span",{class:"text-danger me-1"},"*"),(0,l.Uk)("原價(origin price)")],-1),te={class:"col-sm"},oe={class:"form-floating mb-3"},le=(0,l._)("label",{for:"price"},[(0,l._)("span",{class:"text-danger me-1"},"*"),(0,l.Uk)("售價(price)")],-1),ae={class:"form-floating mb-3"},se=(0,l._)("label",{for:"description"},"商品描述(description)",-1),de={class:"form-floating mb-3"},re=(0,l._)("label",{for:"content"},"商品規格(content)",-1),ie={class:"form-check my-5"},ne={class:"form-check-label",for:"is_enabled"},ce={class:"col-lg-5"},me=(0,l._)("h5",{class:"h5"},"商品圖片",-1),pe={class:"row g-0 align-items-center"},be={class:"col-11"},ue={class:"form-floating mb-3"},ge=(0,l._)("label",{for:"imageUrl"},[(0,l._)("span",{class:"text-danger me-1"},"*"),(0,l.Uk)("主要圖片網址")],-1),_e={class:"col-1"},he=(0,l._)("i",{class:"bi bi-trash-fill"},null,-1),we=[he],ve=["src"],Pe=(0,l._)("h5",{class:"h5 mt-4"},"其餘圖片",-1),fe={key:0},ke={class:"row g-0 align-items-center"},ye={class:"col-11"},Ue={class:"form-floating mb-3"},xe=["id","onUpdate:modelValue"],Ce=["for"],Ne={class:"col-1"},De=["onClick"],Me=(0,l._)("i",{class:"bi bi-trash-fill"},null,-1),$e=[Me],ze=["src"],Te={key:0},Ve={class:"d-grid mt-3"},Ae={key:1},Le={class:"d-grid mt-3"},Ie={class:"modal-footer"},He=(0,l._)("button",{type:"button",class:"btn btn-link text-decoration-none text-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Ye(e,t,o,s,d,r){return(0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",$,[(0,l._)("div",z,[(0,l._)("div",T,[(0,l._)("h5",V,(0,a.zw)(o.isNew?"新增商品":"編輯商品"),1),A]),(0,l._)("div",L,[I,(0,l._)("div",H,[(0,l._)("div",Y,[Z,(0,l._)("div",B,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control border-0 border-bottom rounded-0",id:"title",placeholder:"商品名稱","onUpdate:modelValue":t[0]||(t[0]=e=>d.tempProd.title=e)},null,512),[[D.nr,d.tempProd.title]]),W]),(0,l._)("div",j,[(0,l._)("div",G,[(0,l._)("div",K,[(0,l.wy)((0,l._)("select",{class:"form-select border-0 border-bottom rounded-0",id:"categories","aria-label":"Floating label select","onUpdate:modelValue":t[1]||(t[1]=e=>d.tempProd.category=e)},[O,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.categories,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e},(0,a.zw)(e),9,q)))),128))],512),[[D.bM,d.tempProd.category]]),J])]),(0,l._)("div",S,[(0,l._)("div",F,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control border-0 border-bottom rounded-0",id:"unit",placeholder:"單位","onUpdate:modelValue":t[2]||(t[2]=e=>d.tempProd.unit=e)},null,512),[[D.nr,d.tempProd.unit]]),E])])]),(0,l._)("div",Q,[(0,l._)("div",R,[(0,l._)("div",X,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control border-0 border-bottom rounded-0",id:"origin_price",placeholder:"原價",min:"0","onUpdate:modelValue":t[3]||(t[3]=e=>d.tempProd.origin_price=e)},null,512),[[D.nr,d.tempProd.origin_price]]),ee])]),(0,l._)("div",te,[(0,l._)("div",oe,[(0,l.wy)((0,l._)("input",{type:"number",class:"form-control border-0 border-bottom rounded-0",id:"price",placeholder:"售價",min:"0","onUpdate:modelValue":t[4]||(t[4]=e=>d.tempProd.price=e)},null,512),[[D.nr,d.tempProd.price]]),le])])]),(0,l._)("div",ae,[(0,l.wy)((0,l._)("textarea",{class:"form-control border-0 border-bottom rounded-0",placeholder:"Leave a comment here",id:"description",style:{height:"200px"},"onUpdate:modelValue":t[5]||(t[5]=e=>d.tempProd.description=e)},null,512),[[D.nr,d.tempProd.description]]),se]),(0,l._)("div",de,[(0,l.wy)((0,l._)("textarea",{class:"form-control border-0 border-bottom rounded-0",placeholder:"Leave a comment here",id:"content",style:{height:"200px"},"onUpdate:modelValue":t[6]||(t[6]=e=>d.tempProd.content=e)},null,512),[[D.nr,d.tempProd.content]]),re]),(0,l._)("div",ie,[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"checkbox",id:"is_enabled","onUpdate:modelValue":t[7]||(t[7]=e=>d.tempProd.is_enabled=e),"true-value":1,"false-value":0},null,512),[[D.e8,d.tempProd.is_enabled]]),(0,l._)("label",ne,(0,a.zw)(o.adminProd.is_enabled?"啟用":"不啟用 "),1)])]),(0,l._)("div",ce,[me,(0,l._)("div",pe,[(0,l._)("div",be,[(0,l._)("div",ue,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control border-0 border-bottom rounded-0",id:"imageUrl",placeholder:"主要圖片網址","onUpdate:modelValue":t[8]||(t[8]=e=>d.tempProd.imageUrl=e)},null,512),[[D.nr,d.tempProd.imageUrl]]),ge])]),(0,l._)("div",_e,[(0,l._)("button",{class:"btn btn-outline-danger border-0",onClick:t[9]||(t[9]=(...e)=>r.clear&&r.clear(...e))},we)]),(0,l._)("img",{src:d.tempProd.imageUrl,class:"w-100"},null,8,ve)]),Pe,Array.isArray(d.tempProd.imagesUrl)?((0,l.wg)(),(0,l.iD)("div",fe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.tempProd.imagesUrl,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:e},[(0,l._)("div",ke,[(0,l._)("div",ye,[(0,l._)("div",Ue,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control border-0 border-bottom rounded-0",id:`imagesUrl${Number.parseInt(t)}`,placeholder:"圖片網址","onUpdate:modelValue":e=>d.tempProd.imagesUrl[t]=e},null,8,xe),[[D.nr,d.tempProd.imagesUrl[t]]]),(0,l._)("label",{for:`imagesUrl${Number.parseInt(t)}`},"圖片網址",8,Ce)])]),(0,l._)("div",Ne,[(0,l._)("button",{class:"btn btn-outline-danger border-0",onClick:o=>r.delPics(t,e)},$e,8,De)])]),(0,l._)("img",{src:e,class:"w-100"},null,8,ze)])))),128)),!d.tempProd.imagesUrl.length||d.tempProd.imagesUrl[d.tempProd.imagesUrl.length-1]?((0,l.wg)(),(0,l.iD)("div",Te,[(0,l._)("div",Ve,[(0,l._)("button",{class:"btn btn-outline-dark",onClick:t[10]||(t[10]=(...e)=>r.addPics&&r.addPics(...e))}," 新增其餘圖片 ")])])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("div",Ae,[(0,l._)("div",Le,[(0,l._)("button",{class:"btn btn-outline-dark",onClick:t[11]||(t[11]=e=>(this.tempProd.imagesUrl=[],r.addPics()))}," 新增其餘圖片 ")])]))])])]),(0,l._)("div",Ie,[He,(0,l._)("button",{type:"button",class:(0,a.C_)(["btn",[{"btn-dark":o.isNew},{"btn-warning":!o.isNew}]]),onClick:t[12]||(t[12]=(...e)=>r.upProdBtn&&r.upProdBtn(...e))},[(0,l._)("i",{class:(0,a.C_)(["bi me-2",[{"bi-check-lg":o.isNew},{"bi-check-all":!o.isNew}]])},null,2),(0,l.Uk)((0,a.zw)(o.isNew?"確定新增":"確定修改"),1)],2)])])])],512)}let Ze=null;var Be={props:["adminProd","isNew"],data(){return{tempProd:{},categories:["蛋糕","甜甜圈","馬卡龍"]}},watch:{adminProd(){this.tempProd=this.adminProd}},methods:{upProdBtn(){let e=this.$loading.show(),t="https://vue3-course-api.hexschool.io/v2/api/letcla/admin/product",o="post";this.isNew||(t=`https://vue3-course-api.hexschool.io/v2/api/letcla/admin/product/${this.adminProd.id}`,o="put"),this.$http[o](t,{data:this.adminProd}).then((t=>{e.hide(),this.$emit("get-adminprods"),Ze.hide(),setTimeout((()=>{alert(t.data.message)}),1e3)})).catch((t=>{e.hide(),alert(t.response.data.message)}))},addPics(){this.tempProd.imagesUrl.push("")},delPics(e){this.tempProd.imagesUrl.splice(e,1)},clear(){this.tempProd.imageUrl=""}},mounted(){Ze=new bootstrap.Modal(this.$refs.prodModal,{backdrop:"static",keyboard:!1})}},We=o(89);const je=(0,We.Z)(Be,[["render",Ye]]);var Ge=je,Ke=o(4476);const Oe={class:"modal fade",tabindex:"-1","aria-labelledby":"adminProdModalLabel","aria-hidden":"true",ref:"showAdminProdModal"},qe={class:"modal-dialog modal-xl modal-dialog-centered"},Je={class:"modal-content"},Se=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"adminProdModalLabel"},"商品預覽內容"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Fe={class:"modal-body"},Ee={class:"row"},Qe={class:"col-md-5 col-lg-4"},Re={class:"mainPic border border-5 border-danger rounded-3"},Xe=["src","alt"],et={class:"otherPics"},tt=["src","alt"],ot={class:"col-md-7 col-lg-8"},lt={class:"card border-0 bg-transparent"},at={class:"card-body px-0"},st={class:"d-flex align-items-center"},dt={class:"h2 mb-0"},rt={class:"badge rounded-pill bg-warning fs-6 text-dark ms-2 px-3"},it={class:"fs-5 mt-1"},nt={class:"row align-items-lg-end mt-lg-5"},ct={class:"col-lg-7"},mt={key:0,class:"mb-0"},pt=(0,l.Uk)(" 售價："),bt=(0,l._)("strong",{class:""},"NT$",-1),ut={class:"fs-2"},gt={key:1,class:"mb-0"},_t=(0,l.Uk)(" 優惠價："),ht=(0,l._)("strong",{class:"text-danger"},"NT$",-1),wt={class:"fs-2 text-danger"},vt={class:"text-secondary ms-2"},Pt=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-warning","data-bs-dismiss":"modal"}," 關閉商品 ")],-1);function ft(e,t,o,s,d,r){return(0,l.wg)(),(0,l.iD)("div",Oe,[(0,l._)("div",qe,[(0,l._)("div",Je,[Se,(0,l._)("div",Fe,[(0,l._)("div",Ee,[(0,l._)("div",Qe,[(0,l._)("div",Re,[(0,l._)("img",{src:o.showProd.imageUrl,alt:o.showProd.category},null,8,Xe)]),(0,l._)("div",et,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.showProd.imagesUrl,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[""!==e?((0,l.wg)(),(0,l.iD)("img",{key:0,src:e,alt:o.showProd.title,class:(0,a.C_)(["rounded cursor-pointer me-2 mt-2",{border:e==o.showProd.imageUrl,"border-danger":e==o.showProd.imageUrl,"border-2":e==o.showProd.imageUrl}])},null,10,tt)):(0,l.kq)("",!0)],64)))),128))])]),(0,l._)("div",ot,[(0,l._)("div",lt,[(0,l._)("div",at,[(0,l._)("div",st,[(0,l._)("h2",dt,(0,a.zw)(o.showProd.title),1),(0,l._)("span",rt,(0,a.zw)(o.showProd.category),1)]),(0,l._)("p",it,(0,a.zw)(o.showProd.description),1),(0,l._)("div",nt,[(0,l._)("div",ct,[o.showProd.price===o.showProd.origin_price?((0,l.wg)(),(0,l.iD)("p",mt,[pt,bt,(0,l._)("strong",ut,(0,a.zw)(o.showProd.price),1),(0,l.Uk)(" "+(0,a.zw)(o.showProd.unit)+" / 元 ",1)])):((0,l.wg)(),(0,l.iD)("p",gt,[_t,ht,(0,l._)("strong",wt,(0,a.zw)(o.showProd.price),1),(0,l._)("del",vt,"NT$ "+(0,a.zw)(o.showProd.origin_price),1),(0,l.Uk)(" "+(0,a.zw)(o.showProd.unit)+" / 元 ",1)]))])])])])])])]),Pt])])],512)}let kt=null;var yt={props:["showProd"],mounted(){kt=new bootstrap.Modal(this.$refs.showAdminProdModal,{backdrop:"static",keyboard:!1})}};const Ut=(0,We.Z)(yt,[["render",ft]]);var xt=Ut,Ct={data(){return{adminProds:{},pagination:"",temp:{},isLoading:"",isNew:!0,pageName:"prodsList",createProdTemp:{imagesUrl:[]}}},components:{CreateProdComponent:Ge,DeleteComponent:Ke.Z,AdminProdViewComponent:xt},methods:{getAdminProds(){let e=this.$loading.show();this.$http.get("https://vue3-course-api.hexschool.io/v2/api/letcla/admin/products/all").then((t=>{e.hide(),this.adminProds=Object.keys(t.data.products).map((e=>t.data.products[e])).reverse(),this.pagination=t.data.pagination})).catch((t=>{e.hide(),console.dir(t)}))},openModal(e,t){"new"===e?(this.isNew=!0,this.createProdTemp={imagesUrl:[]},Ze.show()):"edit"===e?(this.isNew=!1,this.createProdTemp=JSON.parse(JSON.stringify(t)),Ze.show()):"delete"===e?(this.isNew=!1,this.createProdTemp={...t},Ke._.show()):"detail"===e&&(this.isNew=!1,this.createProdTemp=t,kt.show())}},mounted(){this.getAdminProds()}};const Nt=(0,We.Z)(Ct,[["render",N]]);var Dt=Nt}}]);
//# sourceMappingURL=115.5baebeb0.js.map